function emptyDuration(){return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,negative:!1,valid:!1}}function toDuration(e){var t=Math.abs(e+0),n=emptyDuration();return n.valid=!0,e<0&&(n.negative=!0),n.years=Math.floor(t/307584e5),t-=307584e5*n.years,n.weeks=Math.floor(t/6048e5),t-=6048e5*n.weeks,n.days=Math.floor(t/864e5),t-=864e5*n.days,n.hours=Math.floor(t/36e5),t-=36e5*n.hours,n.minutes=Math.floor(t/6e4),t-=6e4*n.minutes,n.seconds=Math.floor(t/1e3),t-=1e3*n.seconds,n}function durationToSeconds(e){var t=0;return t+=307584e5*e.years+6048e5*e.weeks+864e5*e.days+36e5*e.hours+6e4*e.minutes+1e3*e.seconds,parseInt(t/1e3)}function parseDuration(e){var t=/([1-9][0-9]*)[\s\t.,=_;@:-]*years?/i,n=/([1-9][0-9]*)[\s\t.,=_;@:-]*months?/i,r=/([1-9][0-9]*)[\s\t.,=_;@:-]*w(eeks?)?/i,i=/([1-9][0-9]*)[\s\t.,=_;@:-]*d(ays?)?/i,s=/([.1-9][.0-9]*)((?=:)[0-9]{2})?[\s\t.,=_;@-]*h(ours?)?/i,o=/([1-9][0-9]*)[\s\t.,=_;@:-]*m(inutes?)?/i,u=/([1-9][0-9]*)[\s\t.,=_;@:-]*s(econds?)?/i,a=/(^-P?|before)/,f=/([-+])?P([0-9]+W)?([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+S)?)?/,l,c,h,p,d,v,m,g,y;l=String(e),c=0,h=0,p=0,d=0,v=0,m=0,g=0;if(l.match(f)){var b=l.match(f);return c=0,h=0,y=b[1]==undefined?!1:!0,p=b[2]==undefined?0:parseInt(b[2])+0,d=b[3]==undefined?0:parseInt(b[3])+0,v=b[5]==undefined?0:parseInt(b[5])+0,m=b[6]==undefined?0:parseInt(b[6])+0,g=b[7]==undefined?0:parseInt(b[7])+0,{years:c,months:h,weeks:p,days:d,hours:v,minutes:m,seconds:g,negative:y,valid:!0}}if(l.match(a))var y=!0;else var y=!1;if(l.match(t))var c=Number(l.match(t)[1]);if(l.match(n))var h=Number(l.match(n)[1]);if(l.match(r))var p=Number(l.match(r)[1]);if(l.match(i))var d=Number(l.match(i)[1]);if(l.match(s))var v=Number(l.match(s)[1]);if(l.match(o))var m=Number(l.match(o)[1]);if(l.match(u))var g=Number(l.match(u)[1]);return{years:c,months:h,weeks:p,days:d,hours:v,minutes:m,seconds:g,negative:y,valid:!1}}function printDuration(e){if(e.valid==undefined)return e;var t="";e.negative==1&&(t="-"),t+="P",e.weeks&&e.weeks!=0&&(t=t+e.weeks+"W"),e.days&&e.days!=0&&(t=t+e.days+"D");var n="";return e.hours&&e.hours!=0&&(n=n+e.hours+"H"),e.minutes&&e.minutes!=0&&(n=n+e.minutes+"M"),e.seconds&&e.seconds!=0&&(n=n+e.seconds+"S"),n.length>0&&(t=t+"T"+n),t}function Zero(e){if(!e)var e=new Date;return e.setUTCMonth(0),e.setUTCDate(1),e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0),e}function dateAdd(e,t,n){var r=new Date(e.getTime()),n=Number(n);if(String(n)=="NaN")return r;switch(t){case"y":case"year":r.setUTCFullYear(e.getUTCFullYear()+n);break;case"m":case"month":r.setUTCMonth(e.getUTCMonth()+n);break;case"W":case"Week":r.setUTCDate(e.getUTCDate()+7*n);break;case"w":case"weeks":r.setWeek(e.getWeek()+n);break;case"d":case"days":r.setUTCDate(e.getUTCDate()+n);break;case"D":case"Day":case"day":r.setUTCDate(e.getUTCDate()-e.getDay()),e.getDay()<=n&&n>=0||n<0?r.setUTCDate(r.getUTCDate()+n):r.setUTCDate(r.getUTCDate()+n+7);break;case"h":case"hour":r.setUTCHours(e.getUTCHours()+n);break;case"M":case"Minute":case"minute":r.setUTCMinutes(e.getUTCMinutes()+n);break;case"s":case"seconds":r.setUTCSeconds(e.getUTCSeconds()+n);break;default:}return r}var zones=function(){this.initialized=!1,this.adjustIntoTZ=function(e){},this.init=function(){this.initialized=!0,this.daylight={},this.standard={},this.Dstart={},this.Sstart={};var e=arguments[0];!e.tzid&&e[0].tzid&&(e=e[0]),this.tzid=e.tzid.toString();var t=new Date,n=(new Date).add("y",2);if(e.daylight.length)for(var r=0;r<e.daylight.length;r++)if(e.daylight[r].rrule instanceof recurrence){var i=e.daylight[r].rrule.expandRecurrence(e.daylight[r].dtstart,n);for(var s in i)this.Dstart[r[s].getUTCFullYear()]=r;this.daylight[r]={begin:e.daylight[r].dtstart,end:i[i.length-1],offset:e.daylight[r].tzoffsetto.VALUE}}else console.log(e);else this.daylight[0]={begin:e.daylight.dtstart,offset:e.daylight.tzoffsetto.VALUE},this.Dstart[e.daylight.dtstart.DATE.getUTCFullYear()]=0;if(e.standard.length)for(var r=0;r<e.standard.length;r++)if(e.standard[r].rrule instanceof recurrence){var i=e.standard[r].rrule.expandRecurrence(e.standard[r].dtstart,n);for(var s in i)this.Sstart[r[s].getUTCFullYear()]=r;this.standard[r]={begin:e.standard[r].dtstart,end:i[i.length-1],offset:e.standard[r].tzoffsetto.VALUE}}else console.log(e);else this.standard[0]={begin:e.standard.dtstart,offset:e.standard.tzoffsetto.VALUE},this.Sstart[e.standard.dtstart.DATE.getUTCFullYear()]=0},arguments[0]&&(this.initialized?this.adjustIntoTZ(arguments):this.init(arguments))};Date.prototype.pad=function(e){return e<10?"0"+e:e},Date.prototype.TimeString=function(){return this.getUTCHours()+""+this.pad(this.getUTCMinutes())+""+this.pad(this.getUTCSeconds())},Date.prototype.DayString=function(){return this.getUTCFullYear()+""+this.pad(this.getUTCMonth()+1)+""+this.pad(this.getUTCDate())},Date.prototype.LocalDayString=function(){return this.getFullYear()+""+this.pad(this.getMonth()+1)+""+this.pad(this.getDate())},Date.prototype.DateString=function(){return this.getUTCFullYear()+""+this.pad(this.getUTCMonth()+1)+""+this.pad(this.getUTCDate())+"T"+this.pad(this.getUTCHours())+""+this.pad(this.getUTCMinutes())+""+this.pad(this.getUTCSeconds())+(this.zulu?"Z":"")},Date.prototype.LocalDateString=function(){return this.getFullYear()+""+this.pad(this.getMonth()+1)+""+this.pad(this.getDate())+"T"+this.pad(this.getHours())+""+this.pad(this.getMinutes())+""+this.pad(this.getSeconds())},Date.prototype.DateStringZ=function(){return this.getUTCFullYear()+""+this.pad(this.getUTCMonth()+1)+""+this.pad(this.getUTCDate())+"T"+this.pad(this.getUTCHours())+""+this.pad(this.getUTCMinutes())+""+this.pad(this.getUTCSeconds())+"Z"},Date.prototype.prettyTime=function(){return settings.twentyFour?this.prettyTime24():this.prettyTime12()},Date.prototype.prettyTime24=function(){return this.getUTCHours()+":"+this.pad(this.getUTCMinutes())},Date.prototype.prettyTime12=function(){return(this.getUTCHours()==12||this.getUTCHours()==0?12:this.getUTCHours()>11?this.getUTCHours()-12:this.getUTCHours())+(this.getUTCMinutes()==0?"":":"+this.pad(this.getUTCMinutes()))+" "+(this.getUTCHours()>11?"PM":"AM")},Date.prototype.prettyDate=function(e){return this.pad(this.getUTCMonth()+1)+"/"+this.pad(this.getUTCDate())+"/"+this.getUTCFullYear()+" "+(e===!0?"":this.prettyTime())},Date.prototype.addDuration=function(e){var t=new Date(this.getTime());if(e["years"]!=undefined)var n=e;else var n=parseDuration(e);var r={years:"y",months:"m",weeks:"w",days:"d",hours:"h",minutes:"M",seconds:"S"};for(var i in n)r[i]!=undefined&&(n[i]>0||n[i]<0)&&this.add(r[i],n[i]);return n.negative==1&&this.setTime(t.getTime()-(this.getTime()-t.getTime())),this},Date.prototype.parseDate=function(e){var t=/([0-9]{4})([0-9]{2})([0-9]{2})([Tt]([0-2][0-9])([0-6][0-9])([0-9]{2}))?([Zz])?/;this.setUTCMilliseconds(0);var n=String(e).match(t).slice(1);return n[3]!=undefined?(this.setUTCFullYear(n[0]),this.setUTCMonth(n[1]-1),this.setUTCDate(n[2]),this.setUTCHours(n[4]),this.setUTCMinutes(n[5]),this.setUTCSeconds(n[6]),this.setUTCMilliseconds(0),this.zulu=n[7]):(this.setUTCFullYear(n[0]),this.setUTCMonth(n[1]-1),this.setUTCDate(n[2]),this.setUTCHours(0),this.setUTCMinutes(0),this.setUTCSeconds(0),this.setUTCMilliseconds(0),this.zulu=n[7]),this},Date.prototype.parsePrettyTime=function(e){this.setUTCMilliseconds(0);var t=/\s*(([0-2]?[0-9]):?([0-6][0-9])?\s*([AP]M)?)?/i,n=String(e).match(t).slice(1);return n[3]!=undefined?(this.setUTCHours(n[3].match(/am/i)?n[1]==12?0:n[1]:n[1]-0+12),this.setUTCMinutes(n[2]==undefined?0:n[2])):(this.setUTCHours(n[1]),this.setUTCMinutes(n[2]==undefined?0:n[2])),this},Date.prototype.parsePrettyDate=function(e,t){t&&(this.setUTCHours(0),this.setUTCMinutes(0),this.setUTCSeconds(0),this.setUTCMilliseconds(0));var n=/([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{4})\s*(([0-2]?[0-9]):?([0-6][0-9])?:?([0-6][0-9])?\s*([AP]M)?)?/i;if(String(e)=="")throw"error in date string";try{var r=String(e).match(n).slice(1)}catch(i){throw"error in date string"}return r[3]!=undefined?(this.setUTCFullYear(r[2]),this.setUTCMonth(r[0]-1),this.setUTCDate(r[1]),this.setUTCHours(r[7]!=undefined?r[7].match(/pm/i)?r[4]<12?r[4]-0+12:12:r[4]==12?0:r[4]:r[4]),this.setUTCMinutes(r[5]==undefined?0:r[5]),this.setUTCSeconds(r[6]||0)):(this.setUTCFullYear(r[2]),this.setUTCMonth(r[0]-1),this.setUTCDate(r[1])),this},Date.prototype.YM=function(){var e=Zero();return e.setUTCMonth(this.getUTCMonth()),e.setUTCFullYear(this.getUTCFullYear()),e},Date.prototype.YW=function(){var e=Zero();return e.setUTCMonth(this.getUTCMonth()),e.setUTCFullYear(this.getUTCFullYear()),e.setUTCDate(this.setUTCDate()),e.setUTCDate(this.getUTCDate()),e.setDayOfWeek(this.WeekStart),e},Date.prototype.localTzApply=function(){var e=localTimezone.offset*60/100*60;return this.setTime(this.getTime()+e*1e3),this},Date.prototype.localTzRemove=function(){var e=localTimezone.offset*60/100*60;return this.setTime(this.getTime()-e*1e3),this},Date.prototype.getLongMinutes=function(){return this.getUTCHours()*100+this.getUTCMinutes()*(100/60)},Date.prototype.Zero=function(){return Zero(this),this},Date.prototype.ZeroTime=function(){return this.setUTCHours(0),this.setUTCMinutes(0),this.setUTCSeconds(0),this.setUTCMilliseconds(0),this},Date.prototype.WeekStart=new Number(0),Date.prototype.setWeekStart=function(e){return this.WeekStart=new Number(e),this},Date.prototype.getWeekStart=function(){return this.WeekStart},Date.prototype.getWeek=function(){var e=0,t=new Date(this);t.setUTCDate(1),t.setUTCMonth(0),t.getDay()<this.WeekStart&&e--;while(t<this&&e<53)t.setUTCDate(t.getUTCDate()+7),e++;return e},Date.prototype.setWeek=function(e){var t=new Date(this),n=t.getWeek();return this.setUTCDate((e-n)*7),this},Date.prototype.getDayOfYear=function(){var e=0,t=new Date(this);t.setUTCDate(1),t.setUTCMonth(0);while(t<this&&e<366)t.setUTCDate(t.getUTCDate()+1),e++;return e},Date.prototype.setDayOfYear=function(e){var t=0;this.setUTCDate(1),this.setUTCMonth(0);while(t<e&&t<366)this.setUTCDate(this.getUTCDate()+1),t++;return this},Date.prototype.getDaysInMonth=function(){var e=new Date(this);return e.setUTCMonth(e.getUTCMonth()+1),e.setUTCDate(-1),e.getUTCDate()},Date.prototype.getWeekInMonth=function(){return Math.ceil(t.getUTCDate()/7)},Date.prototype.setDayOfWeek=function(e){this.setUTCDate(this.getUTCDate()-this.getUTCDay());var t=this.getUTCDate();return this.setUTCDate(t+e),this},Date.prototype.getDayOfWeek=function(e){var t=this.getUTCDay();return t},Date.prototype.add=function(e,t){return this.setTime(dateAdd(this,e,t).getTime()),this}